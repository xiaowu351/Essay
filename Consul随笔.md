# Consul服务发现和健康检查
在这篇文章中，我们将快速了解一下服务发现是什么，与Consul一起使用并使用ASP .NET Core MVC框架在C＃中实现基本服务基础结构，并使用DnsClient.NET实现基于DNS的客户端服务发现。

## 服务发现
在现代微服务架构中，服务可以在容器中运行，并且可以动态启动，停止和扩展。这就导致了一个非常动态的托管环境，可能有数百个实际端点，无法手动配置或找到正确的端点。

尽管如此，我认为服务发现并不仅仅适用于容器中的粒度微服务。任何必须访问其他资源的应用程序都可以使用它。资源可以是数据库、其他Web服务，也可以是驻留在其他地方的网站的一部分。服务发现有助于摆脱特定于环境的配置文件！

服务发现可用于解决此问题，但通常，有许多不同的方法来实现它：
* 客户端服务发现
  > 一种解决方案是拥有一个注册所有服务实例的中心服务注册中心。客户端必须实现查询所需服务的逻辑，最终验证端点是否仍然存在，并可能将请求分发到多个端点。
* 服务器端/负载均衡
所有的流量都经过一个负载均衡器，该均衡器知道所有实际的、动态更改的端点，并相应地重定向所有请求

Consul是一个服务注册表，可用于实现客户端服务发现。

除了使用这种方法的许多重要特性和优点之外，它还有一个缺点，即每个客户端应用程序需要实现一些逻辑来使用这个中心注册中心。这个逻辑可能非常具体，因为Consul和任何其他技术都有自定义API和逻辑工作方式。

负载平衡也可能不会自动完成。客户端可以查询服务的所有可用/注册端点，然后决定选择哪个端点。

Consul不仅提供了一个REST API来查询服务注册中心，这是件好事。它还提供了一个DNS端点，该端点返回标准SRV和TXT记录。

DNS端点确实关心服务的健康状况，因为它不会返回不健康的服务实例。它还通过交替返回记录来实现负载平衡!此外，它可能给服务一个更接近客户端的更高的优先级。

现在，让我们开始...